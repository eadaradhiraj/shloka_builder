<html>
<title>
  Shloka Builder
</title>

<body>
  <button class="btn btn-primary" id="add_word">Add Word</button>
  <ul id="sortable1" class="connectedSortable list-group list-group-horizontal mb-5">
    <li class="list-group-item">
      <div class="input-group word-div">
        <input type="text" class="word form-control" placeholder="enter a word"
          aria-label="Recipient's username with two button addons" aria-describedby="button-addon4">
        <div class="input-group-append" id="button-addon4">
          <input type="text" class="prop form-control" placeholder="enter a property if applicable"
            aria-label="Recipient's username with two button addons" aria-describedby="button-addon4">
          <button class="btn btn-outline-secondary del-item" type="button">delete</button>
        </div>
      </div>
    </li>
  </ul>

  <button id="check" class="btn btn-success">Check</button>
  <div id="results" class="input-group word-div"></div>


</body>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"
  integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"
  integrity="sha512-uto9mlQzrs59VwILcLiRYeLKPPbS/bT71da/OEBYEwcdNUk8jYIy+D176RYoop1Da+f9mvkYrmj5MCLZWEtQuA=="
  crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js"
  integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css"
  integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">
<script src="sandhi.js"></script>
<script src="syllables.js"></script>
<script>
  function create_textare(it, txt) {
    
    let yesorno = ( anushtup_check(syllabalize(txt)) ) ? 'text-success' : 'text-danger';
    html_code = `<input id="result${it}" class="form-control result ${yesorno}" value="${txt}" type="text" readonly>`
    $("#results").append(html_code)
  }
  function loop_objs() {
    arrs = []
    $('.list-group-item').each(function (_, li) {

      st = $(li).find(".word").val()

      prop = $(li).find(".prop").val()

      arrs.push({ "st": st, "prop": prop })

    });
    if (arrs.length == 1) {
      alert("You have only one word!! Enter one more at least.")
    }
    result = join_all_sandhi(arrs)
    $(".result").remove()

    for (var i = 0; i < result.length; i++) {
      create_textare(i, res[i]["st"])
    }

  }

  function del_obj_event() {
    $(".del-item").click(function (el) {
      $(this).closest('.list-group-item').remove();
    })
  }
  $(function () {
    $("#sortable1").sortable({
      connectWith: ".connectedSortable"
    }).disableSelection();
  })

  $("#check").click(function () {
    loop_objs()
  })

  $(document).ready(function () {
    del_obj_event()
  })


  $("#add_word").click(function () {
    $("#sortable1").append(`<li class="list-group-item">
        <div class="input-group">
          <input type="text" class="word form-control" placeholder="enter a word" aria-label="Recipient's username with two button addons" aria-describedby="button-addon4">
            <div class="input-group-append word-div" id="button-addon4">
              <input type="text" class="property form-control" placeholder="enter a property if applicable"
              aria-label="Recipient's username with two button addons" aria-describedby="button-addon4">
              <button class="btn del-item btn-outline-secondary" type="button">DEL</button>
            </div>
          </div>
      </li>`)

    del_obj_event()
  })

</script>

</html>